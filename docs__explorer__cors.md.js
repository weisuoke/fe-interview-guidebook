(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[27],{"H/e0":function(e,n,t){"use strict";t.r(n);var a=t("q1tI"),l=t.n(a),r=t("dEAq"),o=t("H1Ra"),c=l.a.memo((e=>{e.demos;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"markdown"},l.a.createElement("h2",{id:"\u8de8\u57df"},l.a.createElement(r["AnchorLink"],{to:"#\u8de8\u57df","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"\u8de8\u57df"),l.a.createElement("h2",{id:"1-\u4ec0\u4e48\u662f\u8de8\u57df"},l.a.createElement(r["AnchorLink"],{to:"#1-\u4ec0\u4e48\u662f\u8de8\u57df","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"1. \u4ec0\u4e48\u662f\u8de8\u57df\uff1f"),l.a.createElement("h3",{id:"11-\u4ec0\u4e48\u662f\u540c\u6e90\u7b56\u7565\u53ca\u5176\u9650\u5236\u5185\u5bb9"},l.a.createElement(r["AnchorLink"],{to:"#11-\u4ec0\u4e48\u662f\u540c\u6e90\u7b56\u7565\u53ca\u5176\u9650\u5236\u5185\u5bb9","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"1.1 \u4ec0\u4e48\u662f\u540c\u6e90\u7b56\u7565\u53ca\u5176\u9650\u5236\u5185\u5bb9\uff1f"),l.a.createElement("p",null,'\u540c\u6e90\u7b56\u7565\u662f\u4e00\u79cd\u7ea6\u5b9a\uff0c\u5b83\u662f\u6d4f\u89c8\u5668\u6700\u6838\u5fc3\u4e5f\u6700\u57fa\u672c\u7684\u5b89\u5168\u529f\u80fd\uff0c\u5982\u679c\u7f3a\u5c11\u4e86\u540c\u6e90\u7b56\u7565\uff0c\u6d4f\u89c8\u5668\u5f88\u5bb9\u6613\u53d7\u5230XSS\u3001CSRF\u7b49\u653b\u51fb\u3002\u6240\u8c13\u540c\u6e90\u662f\u6307"\u534f\u8bae+\u57df\u540d+\u7aef\u53e3"\u4e09\u8005\u76f8\u540c\uff0c\u5373\u4fbf\u4e24\u4e2a\u4e0d\u540c\u7684\u57df\u540d\u6307\u5411\u540c\u4e00\u4e2aip\u5730\u5740\uff0c\u4e5f\u975e\u540c\u6e90\u3002'),l.a.createElement("p",null,l.a.createElement("img",{src:"https://wsk-mweb.oss-cn-hangzhou.aliyuncs.com/ipic/2020-10-08-101812.png",alt:"url\u7684\u7ec4\u6210"})),l.a.createElement("p",null,l.a.createElement("strong",null,"\u540c\u6e90\u7b56\u7565\u9650\u5236\u5185\u5bb9\u6709\uff1a")),l.a.createElement("ul",null,l.a.createElement("li",null,"Cookie\u3001LocalStorage\u3001IndexedDB \u7b49\u5b58\u50a8\u6027\u5185\u5bb9"),l.a.createElement("li",null,"DOM \u8282\u70b9"),l.a.createElement("li",null,"AJAX \u8bf7\u6c42\u53d1\u9001\u540e\uff0c\u7ed3\u679c\u88ab\u6d4f\u89c8\u5668\u62e6\u622a\u4e86")),l.a.createElement("p",null,"\u4f46\u662f\u6709\u4e09\u4e2a\u6807\u7b7e\u662f\u5141\u8bb8\u8de8\u57df\u52a0\u8f7d\u8d44\u6e90\uff1a"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("code",null,"<img src=XXX>")),l.a.createElement("li",null,l.a.createElement("code",null,"<link href=XXX>")),l.a.createElement("li",null,l.a.createElement("code",null,"<script src=XXX>"))),l.a.createElement("h3",{id:"12-\u5e38\u89c1\u8de8\u57df\u573a\u666f"},l.a.createElement(r["AnchorLink"],{to:"#12-\u5e38\u89c1\u8de8\u57df\u573a\u666f","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"1.2 \u5e38\u89c1\u8de8\u57df\u573a\u666f"),l.a.createElement("p",null,l.a.createElement("strong",null,"\u5f53\u534f\u8bae\u3001\u5b50\u57df\u540d\u3001\u4e3b\u57df\u540d\u3001\u7aef\u53e3\u53f7\u4e2d\u4efb\u610f\u4e00\u4e2a\u4e0d\u76f8\u540c\u65f6\uff0c\u90fd\u7b97\u4f5c\u4e0d\u540c\u57df"),"\u3002\u4e0d\u540c\u57df\u4e4b\u95f4\u76f8\u4e92\u8bf7\u6c42\u8d44\u6e90\uff0c\u5c31\u7b97\u4f5c\u201c\u8de8\u57df\u201d\u3002\u5e38\u89c1\u8de8\u57df\u573a\u666f\u5982\u4e0b\u56fe\u6240\u793a\uff1a"),l.a.createElement("p",null,l.a.createElement("img",{src:"https://wsk-mweb.oss-cn-hangzhou.aliyuncs.com/ipic/2020-10-08-101900.png",alt:"img"})),l.a.createElement("p",null,"\u7279\u522b\u8bf4\u660e\u4e24\u70b9\uff1a"),l.a.createElement("p",null,l.a.createElement("strong",null,"\u7b2c\u4e00\uff1a\u5982\u679c\u662f\u534f\u8bae\u548c\u7aef\u53e3\u9020\u6210\u7684\u8de8\u57df\u95ee\u9898\u201c\u524d\u53f0\u201d\u662f\u65e0\u80fd\u4e3a\u529b\u7684\u3002")),l.a.createElement("p",null,l.a.createElement("strong",null,"\u7b2c\u4e8c\uff1a\u5728\u8de8\u57df\u95ee\u9898\u4e0a\uff0c\u4ec5\u4ec5\u662f\u901a\u8fc7\u201cURL\u7684\u9996\u90e8\u201d\u6765\u8bc6\u522b\u800c\u4e0d\u4f1a\u6839\u636e\u57df\u540d\u5bf9\u5e94\u7684IP\u5730\u5740\u662f\u5426\u76f8\u540c\u6765\u5224\u65ad\u3002\u201cURL\u7684\u9996\u90e8\u201d\u53ef\u4ee5\u7406\u89e3\u4e3a\u201c\u534f\u8bae, \u57df\u540d\u548c\u7aef\u53e3\u5fc5\u987b\u5339\u914d\u201d"),"\u3002"),l.a.createElement("p",null,"\u8fd9\u91cc\u4f60\u6216\u8bb8\u6709\u4e2a\u7591\u95ee\uff1a",l.a.createElement("strong",null,"\u8bf7\u6c42\u8de8\u57df\u4e86\uff0c\u90a3\u4e48\u8bf7\u6c42\u5230\u5e95\u53d1\u51fa\u53bb\u6ca1\u6709\uff1f")),l.a.createElement("p",null,l.a.createElement("strong",null,"\u8de8\u57df\u5e76\u4e0d\u662f\u8bf7\u6c42\u53d1\u4e0d\u51fa\u53bb\uff0c\u8bf7\u6c42\u80fd\u53d1\u51fa\u53bb\uff0c\u670d\u52a1\u7aef\u80fd\u6536\u5230\u8bf7\u6c42\u5e76\u6b63\u5e38\u8fd4\u56de\u7ed3\u679c\uff0c\u53ea\u662f\u7ed3\u679c\u88ab\u6d4f\u89c8\u5668\u62e6\u622a\u4e86"),"\u3002\u4f60\u53ef\u80fd\u4f1a\u7591\u95ee\u660e\u660e\u901a\u8fc7\u8868\u5355\u7684\u65b9\u5f0f\u53ef\u4ee5\u53d1\u8d77\u8de8\u57df\u8bf7\u6c42\uff0c\u4e3a\u4ec0\u4e48 Ajax \u5c31\u4e0d\u4f1a?\u56e0\u4e3a\u5f52\u6839\u7ed3\u5e95\uff0c\u8de8\u57df\u662f\u4e3a\u4e86\u963b\u6b62\u7528\u6237\u8bfb\u53d6\u5230\u53e6\u4e00\u4e2a\u57df\u540d\u4e0b\u7684\u5185\u5bb9\uff0cAjax \u53ef\u4ee5\u83b7\u53d6\u54cd\u5e94\uff0c\u6d4f\u89c8\u5668\u8ba4\u4e3a\u8fd9\u4e0d\u5b89\u5168\uff0c\u6240\u4ee5\u62e6\u622a\u4e86\u54cd\u5e94\u3002\u4f46\u662f\u8868\u5355\u5e76\u4e0d\u4f1a\u83b7\u53d6\u65b0\u7684\u5185\u5bb9\uff0c\u6240\u4ee5\u53ef\u4ee5\u53d1\u8d77\u8de8\u57df\u8bf7\u6c42\u3002\u540c\u65f6\u4e5f\u8bf4\u660e\u4e86\u8de8\u57df\u5e76\u4e0d\u80fd\u5b8c\u5168\u963b\u6b62 CSRF\uff0c\u56e0\u4e3a\u8bf7\u6c42\u6bd5\u7adf\u662f\u53d1\u51fa\u53bb\u4e86\u3002"),l.a.createElement("h2",{id:"2-\u8de8\u57df\u89e3\u51b3\u65b9\u6848"},l.a.createElement(r["AnchorLink"],{to:"#2-\u8de8\u57df\u89e3\u51b3\u65b9\u6848","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"2. \u8de8\u57df\u89e3\u51b3\u65b9\u6848"),l.a.createElement("h3",{id:"21-jsonp"},l.a.createElement(r["AnchorLink"],{to:"#21-jsonp","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"2.1 jsonp"),l.a.createElement("h4",{id:"211--jsonp\u539f\u7406"},l.a.createElement(r["AnchorLink"],{to:"#211--jsonp\u539f\u7406","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"2.1.1  JSONP\u539f\u7406"),l.a.createElement("p",null,l.a.createElement("strong",null,"\u5229\u7528 ",l.a.createElement("code",null,"<script>")," \u6807\u7b7e\u6ca1\u6709\u8de8\u57df\u9650\u5236\u7684\u6f0f\u6d1e\uff0c\u7f51\u9875\u53ef\u4ee5\u5f97\u5230\u4ece\u5176\u4ed6\u6765\u6e90\u52a8\u6001\u4ea7\u751f\u7684 JSON \u6570\u636e\u3002JSONP\u8bf7\u6c42\u4e00\u5b9a\u9700\u8981\u5bf9\u65b9\u7684\u670d\u52a1\u5668\u505a\u652f\u6301\u624d\u53ef\u4ee5\u3002")),l.a.createElement("h4",{id:"212--jsonp\u548cajax\u5bf9\u6bd4"},l.a.createElement(r["AnchorLink"],{to:"#212--jsonp\u548cajax\u5bf9\u6bd4","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"2.1.2  JSONP\u548cAJAX\u5bf9\u6bd4"),l.a.createElement("p",null,"JSONP\u548cAJAX\u76f8\u540c\uff0c\u90fd\u662f\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u7aef\u53d1\u9001\u8bf7\u6c42\uff0c\u4ece\u670d\u52a1\u5668\u7aef\u83b7\u53d6\u6570\u636e\u7684\u65b9\u5f0f\u3002\u4f46AJAX\u5c5e\u4e8e\u540c\u6e90\u7b56\u7565\uff0cJSONP\u5c5e\u4e8e\u975e\u540c\u6e90\u7b56\u7565\uff08\u8de8\u57df\u8bf7\u6c42\uff09"),l.a.createElement("h4",{id:"213-jsonp\u4f18\u7f3a\u70b9"},l.a.createElement(r["AnchorLink"],{to:"#213-jsonp\u4f18\u7f3a\u70b9","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"2.1.3 JSONP\u4f18\u7f3a\u70b9"),l.a.createElement("p",null,"JSONP\u4f18\u70b9\u662f\u7b80\u5355\u517c\u5bb9\u6027\u597d\uff0c\u53ef\u7528\u4e8e\u89e3\u51b3\u4e3b\u6d41\u6d4f\u89c8\u5668\u7684\u8de8\u57df\u6570\u636e\u8bbf\u95ee\u7684\u95ee\u9898\u3002",l.a.createElement("strong",null,"\u7f3a\u70b9\u662f\u4ec5\u652f\u6301get\u65b9\u6cd5\u5177\u6709\u5c40\u9650\u6027,\u4e0d\u5b89\u5168\u53ef\u80fd\u4f1a\u906d\u53d7XSS\u653b\u51fb\u3002")),l.a.createElement("h4",{id:"214--jsonp\u7684\u5b9e\u73b0\u6d41\u7a0b"},l.a.createElement(r["AnchorLink"],{to:"#214--jsonp\u7684\u5b9e\u73b0\u6d41\u7a0b","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"2.1.4  JSONP\u7684\u5b9e\u73b0\u6d41\u7a0b"),l.a.createElement("ul",null,l.a.createElement("li",null,"\u58f0\u660e\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u5176\u51fd\u6570\u540d(\u5982show)\u5f53\u505a\u53c2\u6570\u503c\uff0c\u8981\u4f20\u9012\u7ed9\u8de8\u57df\u8bf7\u6c42\u6570\u636e\u7684\u670d\u52a1\u5668\uff0c\u51fd\u6570\u5f62\u53c2\u4e3a\u8981\u83b7\u53d6\u76ee\u6807\u6570\u636e(\u670d\u52a1\u5668\u8fd4\u56de\u7684data)\u3002"),l.a.createElement("li",null,"\u521b\u5efa\u4e00\u4e2a",l.a.createElement("code",null,"<script>"),"\u6807\u7b7e\uff0c\u628a\u90a3\u4e2a\u8de8\u57df\u7684API\u6570\u636e\u63a5\u53e3\u5730\u5740\uff0c\u8d4b\u503c\u7ed9script\u7684src,\u8fd8\u8981\u5728\u8fd9\u4e2a\u5730\u5740\u4e2d\u5411\u670d\u52a1\u5668\u4f20\u9012\u8be5\u51fd\u6570\u540d\uff08\u53ef\u4ee5\u901a\u8fc7\u95ee\u53f7\u4f20\u53c2:?callback=show\uff09\u3002"),l.a.createElement("li",null,"\u670d\u52a1\u5668\u63a5\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u9700\u8981\u8fdb\u884c\u7279\u6b8a\u7684\u5904\u7406\uff1a\u628a\u4f20\u9012\u8fdb\u6765\u7684\u51fd\u6570\u540d\u548c\u5b83\u9700\u8981\u7ed9\u4f60\u7684\u6570\u636e\u62fc\u63a5\u6210\u4e00\u4e2a\u5b57\u7b26\u4e32,\u4f8b\u5982\uff1a\u4f20\u9012\u8fdb\u53bb\u7684\u51fd\u6570\u540d\u662fshow\uff0c\u5b83\u51c6\u5907\u597d\u7684\u6570\u636e\u662f",l.a.createElement("code",null,"show('\u6211\u4e0d\u7231\u4f60')"),"\u3002"),l.a.createElement("li",null,"\u6700\u540e\u670d\u52a1\u5668\u628a\u51c6\u5907\u7684\u6570\u636e\u901a\u8fc7HTTP\u534f\u8bae\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff0c\u5ba2\u6237\u7aef\u518d\u8c03\u7528\u6267\u884c\u4e4b\u524d\u58f0\u660e\u7684\u56de\u8c03\u51fd\u6570\uff08show\uff09\uff0c\u5bf9\u8fd4\u56de\u7684\u6570\u636e\u8fdb\u884c\u64cd\u4f5c\u3002")),l.a.createElement("p",null,"\u5728\u5f00\u53d1\u4e2d\u53ef\u80fd\u4f1a\u9047\u5230\u591a\u4e2a JSONP \u8bf7\u6c42\u7684\u56de\u8c03\u51fd\u6570\u540d\u662f\u76f8\u540c\u7684\uff0c\u8fd9\u65f6\u5019\u5c31\u9700\u8981\u81ea\u5df1\u5c01\u88c5\u4e00\u4e2a JSONP\u51fd\u6570\u3002"),l.a.createElement(o["a"],{code:"// index.html\nfunction jsonp({ url, params, callback }) {\n  return new Promise((resolve, reject) => {\n    let script = document.createElement('script')\n    window[callback] = function(data) {\n      resolve(data)\n      document.body.removeChild(script)\n    }\n    params = { ...params, callback } // wd=b&callback=show\n    let arrs = []\n    for (let key in params) {\n      arrs.push(`${key}=${params[key]}`)\n    }\n    script.src = `${url}?${arrs.join('&')}`\n    document.body.appendChild(script)\n  })\n}\njsonp({\n  url: 'http://localhost:3000/say',\n  params: { wd: 'Iloveyou' },\n  callback: 'show'\n}).then(data => {\n  console.log(data)\n})",lang:"js"}),l.a.createElement("p",null,"\u4e0a\u9762\u8fd9\u6bb5\u4ee3\u7801\u76f8\u5f53\u4e8e\u5411",l.a.createElement("code",null,"http://localhost:3000/say?wd=Iloveyou&callback=show"),"\u8fd9\u4e2a\u5730\u5740\u8bf7\u6c42\u6570\u636e\uff0c\u7136\u540e\u540e\u53f0\u8fd4\u56de",l.a.createElement("code",null,"show('\u6211\u4e0d\u7231\u4f60')"),"\uff0c\u6700\u540e\u4f1a\u8fd0\u884cshow()\u8fd9\u4e2a\u51fd\u6570\uff0c\u6253\u5370\u51fa'\u6211\u4e0d\u7231\u4f60'"),l.a.createElement(o["a"],{code:"// server.js\nlet express = require('express')\nlet app = express()\napp.get('/say', function(req, res) {\n  let { wd, callback } = req.query\n  console.log(wd) // Iloveyou\n  console.log(callback) // show\n  res.end(`${callback}('\u6211\u4e0d\u7231\u4f60')`)\n})\napp.listen(3000)",lang:"js"}),l.a.createElement("h4",{id:"215-jquery\u7684jsonp\u5f62\u5f0f"},l.a.createElement(r["AnchorLink"],{to:"#215-jquery\u7684jsonp\u5f62\u5f0f","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"2.1.5 jQuery\u7684jsonp\u5f62\u5f0f"),l.a.createElement("p",null,l.a.createElement("strong",null,"JSONP\u90fd\u662fGET\u548c\u5f02\u6b65\u8bf7\u6c42\u7684\uff0c\u4e0d\u5b58\u5728\u5176\u4ed6\u7684\u8bf7\u6c42\u65b9\u5f0f\u548c\u540c\u6b65\u8bf7\u6c42\uff0c\u4e14jQuery\u9ed8\u8ba4\u5c31\u4f1a\u7ed9JSONP\u7684\u8bf7\u6c42\u6e05\u9664\u7f13\u5b58\u3002")),l.a.createElement(o["a"],{code:'$.ajax({\n  url:"http://crossdomain.com/jsonServerResponse",\n  dataType:"jsonp",\n  type:"get",//\u53ef\u4ee5\u7701\u7565\n  jsonpCallback:"show",//->\u81ea\u5b9a\u4e49\u4f20\u9012\u7ed9\u670d\u52a1\u5668\u7684\u51fd\u6570\u540d\uff0c\u800c\u4e0d\u662f\u4f7f\u7528jQuery\u81ea\u52a8\u751f\u6210\u7684\uff0c\u53ef\u7701\u7565\n  jsonp:"callback",//->\u628a\u4f20\u9012\u51fd\u6570\u540d\u7684\u90a3\u4e2a\u5f62\u53c2callback\uff0c\u53ef\u7701\u7565\n  success:function (data){\n  console.log(data);}\n});',lang:"js"}),l.a.createElement("h3",{id:"22-cors"},l.a.createElement(r["AnchorLink"],{to:"#22-cors","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"2.2 cors"),l.a.createElement("p",null,l.a.createElement("strong",null,"CORS \u9700\u8981\u6d4f\u89c8\u5668\u548c\u540e\u7aef\u540c\u65f6\u652f\u6301\u3002IE 8 \u548c 9 \u9700\u8981\u901a\u8fc7 XDomainRequest \u6765\u5b9e\u73b0"),"\u3002"),l.a.createElement("p",null,"\u6d4f\u89c8\u5668\u4f1a\u81ea\u52a8\u8fdb\u884c CORS \u901a\u4fe1\uff0c\u5b9e\u73b0 CORS \u901a\u4fe1\u7684\u5173\u952e\u662f\u540e\u7aef\u3002\u53ea\u8981\u540e\u7aef\u5b9e\u73b0\u4e86 CORS\uff0c\u5c31\u5b9e\u73b0\u4e86\u8de8\u57df\u3002"),l.a.createElement("p",null,"\u670d\u52a1\u7aef\u8bbe\u7f6e Access-Control-Allow-Origin \u5c31\u53ef\u4ee5\u5f00\u542f CORS\u3002 \u8be5\u5c5e\u6027\u8868\u793a\u54ea\u4e9b\u57df\u540d\u53ef\u4ee5\u8bbf\u95ee\u8d44\u6e90\uff0c\u5982\u679c\u8bbe\u7f6e\u901a\u914d\u7b26\u5219\u8868\u793a\u6240\u6709\u7f51\u7ad9\u90fd\u53ef\u4ee5\u8bbf\u95ee\u8d44\u6e90\u3002"),l.a.createElement("p",null,"\u867d\u7136\u8bbe\u7f6e CORS \u548c\u524d\u7aef\u6ca1\u4ec0\u4e48\u5173\u7cfb\uff0c\u4f46\u662f\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u89e3\u51b3\u8de8\u57df\u95ee\u9898\u7684\u8bdd\uff0c\u4f1a\u5728\u53d1\u9001\u8bf7\u6c42\u65f6\u51fa\u73b0\u4e24\u79cd\u60c5\u51b5\uff0c\u5206\u522b\u4e3a",l.a.createElement("strong",null,"\u7b80\u5355\u8bf7\u6c42"),"\u548c",l.a.createElement("strong",null,"\u590d\u6742\u8bf7\u6c42"),"\u3002"),l.a.createElement("h4",{id:"221-\u7b80\u5355\u8bf7\u6c42"},l.a.createElement(r["AnchorLink"],{to:"#221-\u7b80\u5355\u8bf7\u6c42","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"2.2.1 \u7b80\u5355\u8bf7\u6c42"),l.a.createElement("p",null,"\u53ea\u8981\u540c\u65f6\u6ee1\u8db3\u4ee5\u4e0b\u4e24\u5927\u6761\u4ef6\uff0c\u5c31\u5c5e\u4e8e\u7b80\u5355\u8bf7\u6c42"),l.a.createElement("p",null,"\u6761\u4ef61\uff1a\u4f7f\u7528\u4e0b\u5217\u65b9\u6cd5\u4e4b\u4e00\uff1a"),l.a.createElement("ul",null,l.a.createElement("li",null,"GET"),l.a.createElement("li",null,"HEAD"),l.a.createElement("li",null,"POST")),l.a.createElement("p",null,"\u6761\u4ef62\uff1aContent-Type \u7684\u503c\u4ec5\u9650\u4e8e\u4e0b\u5217\u4e09\u8005\u4e4b\u4e00\uff1a"),l.a.createElement("ul",null,l.a.createElement("li",null,"text/plain"),l.a.createElement("li",null,"multipart/form-data"),l.a.createElement("li",null,"application/x-www-form-urlencoded")),l.a.createElement("p",null,"\u8bf7\u6c42\u4e2d\u7684\u4efb\u610f XMLHttpRequestUpload \u5bf9\u8c61\u5747\u6ca1\u6709\u6ce8\u518c\u4efb\u4f55\u4e8b\u4ef6\u76d1\u542c\u5668\uff1b XMLHttpRequestUpload \u5bf9\u8c61\u53ef\u4ee5\u4f7f\u7528 XMLHttpRequest.upload \u5c5e\u6027\u8bbf\u95ee\u3002"),l.a.createElement("h4",{id:"222-\u590d\u6742\u8bf7\u6c42"},l.a.createElement(r["AnchorLink"],{to:"#222-\u590d\u6742\u8bf7\u6c42","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"2.2.2 \u590d\u6742\u8bf7\u6c42"),l.a.createElement("p",null,'\u4e0d\u7b26\u5408\u4ee5\u4e0a\u6761\u4ef6\u7684\u8bf7\u6c42\u5c31\u80af\u5b9a\u662f\u590d\u6742\u8bf7\u6c42\u4e86\u3002 \u590d\u6742\u8bf7\u6c42\u7684CORS\u8bf7\u6c42\uff0c\u4f1a\u5728\u6b63\u5f0f\u901a\u4fe1\u4e4b\u524d\uff0c\u589e\u52a0\u4e00\u6b21HTTP\u67e5\u8be2\u8bf7\u6c42\uff0c\u79f0\u4e3a"\u9884\u68c0"\u8bf7\u6c42,\u8be5\u8bf7\u6c42\u662f option \u65b9\u6cd5\u7684\uff0c\u901a\u8fc7\u8be5\u8bf7\u6c42\u6765\u77e5\u9053\u670d\u52a1\u7aef\u662f\u5426\u5141\u8bb8\u8de8\u57df\u8bf7\u6c42\u3002'),l.a.createElement("p",null,"\u6211\u4eec\u7528",l.a.createElement("code",null,"PUT"),"\u5411\u540e\u53f0\u8bf7\u6c42\u65f6\uff0c\u5c5e\u4e8e\u590d\u6742\u8bf7\u6c42\uff0c\u540e\u53f0\u9700\u505a\u5982\u4e0b\u914d\u7f6e\uff1a"),l.a.createElement(o["a"],{code:"// \u5141\u8bb8\u54ea\u4e2a\u65b9\u6cd5\u8bbf\u95ee\u6211\nres.setHeader('Access-Control-Allow-Methods', 'PUT')\n// \u9884\u68c0\u7684\u5b58\u6d3b\u65f6\u95f4\nres.setHeader('Access-Control-Max-Age', 6)\n// OPTIONS\u8bf7\u6c42\u4e0d\u505a\u4efb\u4f55\u5904\u7406\nif (req.method === 'OPTIONS') {\n  res.end() \n}\n// \u5b9a\u4e49\u540e\u53f0\u8fd4\u56de\u7684\u5185\u5bb9\napp.put('/getData', function(req, res) {\n  console.log(req.headers)\n  res.end('\u6211\u4e0d\u7231\u4f60')\n})",lang:"js"}),l.a.createElement("p",null,"\u63a5\u4e0b\u6765\u6211\u4eec\u770b\u4e0b\u4e00\u4e2a\u5b8c\u6574\u590d\u6742\u8bf7\u6c42\u7684\u4f8b\u5b50\uff0c\u5e76\u4e14\u4ecb\u7ecd\u4e0bCORS\u8bf7\u6c42\u76f8\u5173\u7684\u5b57\u6bb5"),l.a.createElement(o["a"],{code:"// index.html\nlet xhr = new XMLHttpRequest()\ndocument.cookie = 'name=xiamen' // cookie\u4e0d\u80fd\u8de8\u57df\nxhr.withCredentials = true // \u524d\u7aef\u8bbe\u7f6e\u662f\u5426\u5e26cookie\nxhr.open('PUT', 'http://localhost:4000/getData', true)\nxhr.setRequestHeader('name', 'xiamen')\nxhr.onreadystatechange = function() {\n  if (xhr.readyState === 4) {\n    if ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304) {\n      console.log(xhr.response)\n      //\u5f97\u5230\u54cd\u5e94\u5934\uff0c\u540e\u53f0\u9700\u8bbe\u7f6eAccess-Control-Expose-Headers\n      console.log(xhr.getResponseHeader('name'))\n    }\n  }\n}\nxhr.send()\n\u590d\u5236\u4ee3\u7801\n//server1.js\nlet express = require('express');\nlet app = express();\napp.use(express.static(__dirname));\napp.listen(3000);\n\u590d\u5236\u4ee3\u7801\n//server2.js\nlet express = require('express')\nlet app = express()\nlet whitList = ['http://localhost:3000'] //\u8bbe\u7f6e\u767d\u540d\u5355\napp.use(function(req, res, next) {\n  let origin = req.headers.origin\n  if (whitList.includes(origin)) {\n    // \u8bbe\u7f6e\u54ea\u4e2a\u6e90\u53ef\u4ee5\u8bbf\u95ee\u6211\n    res.setHeader('Access-Control-Allow-Origin', origin)\n    // \u5141\u8bb8\u643a\u5e26\u54ea\u4e2a\u5934\u8bbf\u95ee\u6211\n    res.setHeader('Access-Control-Allow-Headers', 'name')\n    // \u5141\u8bb8\u54ea\u4e2a\u65b9\u6cd5\u8bbf\u95ee\u6211\n    res.setHeader('Access-Control-Allow-Methods', 'PUT')\n    // \u5141\u8bb8\u643a\u5e26cookie\n    res.setHeader('Access-Control-Allow-Credentials', true)\n    // \u9884\u68c0\u7684\u5b58\u6d3b\u65f6\u95f4\n    res.setHeader('Access-Control-Max-Age', 6)\n    // \u5141\u8bb8\u8fd4\u56de\u7684\u5934\n    res.setHeader('Access-Control-Expose-Headers', 'name')\n    if (req.method === 'OPTIONS') {\n      res.end() // OPTIONS\u8bf7\u6c42\u4e0d\u505a\u4efb\u4f55\u5904\u7406\n    }\n  }\n  next()\n})\napp.put('/getData', function(req, res) {\n  console.log(req.headers)\n  res.setHeader('name', 'jw') //\u8fd4\u56de\u4e00\u4e2a\u54cd\u5e94\u5934\uff0c\u540e\u53f0\u9700\u8bbe\u7f6e\n  res.end('\u6211\u4e0d\u7231\u4f60')\n})\napp.get('/getData', function(req, res) {\n  console.log(req.headers)\n  res.end('\u6211\u4e0d\u7231\u4f60')\n})\napp.use(express.static(__dirname))\napp.listen(4000)",lang:"js"}),l.a.createElement("p",null,"\u4e0a\u8ff0\u4ee3\u7801\u7531",l.a.createElement("code",null,"http://localhost:3000/index.html"),"\u5411",l.a.createElement("code",null,"http://localhost:4000/"),"\u8de8\u57df\u8bf7\u6c42\uff0c\u6b63\u5982\u6211\u4eec\u4e0a\u9762\u6240\u8bf4\u7684\uff0c\u540e\u7aef\u662f\u5b9e\u73b0 CORS \u901a\u4fe1\u7684\u5173\u952e\u3002"),l.a.createElement("h3",{id:"23-postmessage"},l.a.createElement(r["AnchorLink"],{to:"#23-postmessage","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"2.3 postMessage"),l.a.createElement("p",null,"postMessage\u662fHTML5 XMLHttpRequest Level 2\u4e2d\u7684API\uff0c\u4e14\u662f\u4e3a\u6570\u4e0d\u591a\u53ef\u4ee5\u8de8\u57df\u64cd\u4f5c\u7684window\u5c5e\u6027\u4e4b\u4e00\uff0c\u5b83\u53ef\u7528\u4e8e\u89e3\u51b3\u4ee5\u4e0b\u65b9\u9762\u7684\u95ee\u9898\uff1a"),l.a.createElement("ul",null,l.a.createElement("li",null,"\u9875\u9762\u548c\u5176\u6253\u5f00\u7684\u65b0\u7a97\u53e3\u7684\u6570\u636e\u4f20\u9012"),l.a.createElement("li",null,"\u591a\u7a97\u53e3\u4e4b\u95f4\u6d88\u606f\u4f20\u9012"),l.a.createElement("li",null,"\u9875\u9762\u4e0e\u5d4c\u5957\u7684iframe\u6d88\u606f\u4f20\u9012"),l.a.createElement("li",null,"\u4e0a\u9762\u4e09\u4e2a\u573a\u666f\u7684\u8de8\u57df\u6570\u636e\u4f20\u9012")),l.a.createElement("p",null,l.a.createElement("strong",null,"postMessage()\u65b9\u6cd5\u5141\u8bb8\u6765\u81ea\u4e0d\u540c\u6e90\u7684\u811a\u672c\u91c7\u7528\u5f02\u6b65\u65b9\u5f0f\u8fdb\u884c\u6709\u9650\u7684\u901a\u4fe1\uff0c\u53ef\u4ee5\u5b9e\u73b0\u8de8\u6587\u672c\u6863\u3001\u591a\u7a97\u53e3\u3001\u8de8\u57df\u6d88\u606f\u4f20\u9012"),"\u3002"),l.a.createElement("blockquote",null,l.a.createElement("p",null,"otherWindow.postMessage(message, targetOrigin, [transfer]);")),l.a.createElement("ul",null,l.a.createElement("li",null,"message: \u5c06\u8981\u53d1\u9001\u5230\u5176\u4ed6 window\u7684\u6570\u636e\u3002"),l.a.createElement("li",null,'targetOrigin:\u901a\u8fc7\u7a97\u53e3\u7684origin\u5c5e\u6027\u6765\u6307\u5b9a\u54ea\u4e9b\u7a97\u53e3\u80fd\u63a5\u6536\u5230\u6d88\u606f\u4e8b\u4ef6\uff0c\u5176\u503c\u53ef\u4ee5\u662f\u5b57\u7b26\u4e32"*"\uff08\u8868\u793a\u65e0\u9650\u5236\uff09\u6216\u8005\u4e00\u4e2aURI\u3002\u5728\u53d1\u9001\u6d88\u606f\u7684\u65f6\u5019\uff0c\u5982\u679c\u76ee\u6807\u7a97\u53e3\u7684\u534f\u8bae\u3001\u4e3b\u673a\u5730\u5740\u6216\u7aef\u53e3\u8fd9\u4e09\u8005\u7684\u4efb\u610f\u4e00\u9879\u4e0d\u5339\u914dtargetOrigin\u63d0\u4f9b\u7684\u503c\uff0c\u90a3\u4e48\u6d88\u606f\u5c31\u4e0d\u4f1a\u88ab\u53d1\u9001\uff1b\u53ea\u6709\u4e09\u8005\u5b8c\u5168\u5339\u914d\uff0c\u6d88\u606f\u624d\u4f1a\u88ab\u53d1\u9001\u3002'),l.a.createElement("li",null,"transfer(\u53ef\u9009)\uff1a\u662f\u4e00\u4e32\u548cmessage \u540c\u65f6\u4f20\u9012\u7684 Transferable \u5bf9\u8c61. \u8fd9\u4e9b\u5bf9\u8c61\u7684\u6240\u6709\u6743\u5c06\u88ab\u8f6c\u79fb\u7ed9\u6d88\u606f\u7684\u63a5\u6536\u65b9\uff0c\u800c\u53d1\u9001\u4e00\u65b9\u5c06\u4e0d\u518d\u4fdd\u6709\u6240\u6709\u6743\u3002")),l.a.createElement("p",null,"\u63a5\u4e0b\u6765\u6211\u4eec\u770b\u4e2a\u4f8b\u5b50\uff1a ",l.a.createElement("code",null,"http://localhost:3000/a.html"),"\u9875\u9762\u5411",l.a.createElement("code",null,"http://localhost:4000/b.html"),'\u4f20\u9012\u201c\u6211\u7231\u4f60\u201d,\u7136\u540e\u540e\u8005\u4f20\u56de"\u6211\u4e0d\u7231\u4f60"\u3002'),l.a.createElement(o["a"],{code:'// a.html\n<iframe src="http://localhost:4000/b.html" frameborder="0" id="frame" onload="load()"></iframe> //\u7b49\u5b83\u52a0\u8f7d\u5b8c\u89e6\u53d1\u4e00\u4e2a\u4e8b\u4ef6\n//\u5185\u5d4c\u5728http://localhost:3000/a.html\n<script>\n  function load() {\n    let frame = document.getElementById(\'frame\')\n    frame.contentWindow.postMessage(\'\u6211\u7231\u4f60\', \'http://localhost:4000\') //\u53d1\u9001\u6570\u636e\n    window.onmessage = function(e) { //\u63a5\u53d7\u8fd4\u56de\u6570\u636e\n      console.log(e.data) //\u6211\u4e0d\u7231\u4f60\n    }\n  }\n<\/script>',lang:"html"}),l.a.createElement(o["a"],{code:"// b.html\n  window.onmessage = function(e) {\n    console.log(e.data) //\u6211\u7231\u4f60\n    e.source.postMessage('\u6211\u4e0d\u7231\u4f60', e.origin)\n }",lang:"js"}),l.a.createElement("h3",{id:"24-websocket"},l.a.createElement(r["AnchorLink"],{to:"#24-websocket","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"2.4 websocket"),l.a.createElement("p",null,"Websocket\u662fHTML5\u7684\u4e00\u4e2a\u6301\u4e45\u5316\u7684\u534f\u8bae\uff0c\u5b83\u5b9e\u73b0\u4e86\u6d4f\u89c8\u5668\u4e0e\u670d\u52a1\u5668\u7684\u5168\u53cc\u5de5\u901a\u4fe1\uff0c\u540c\u65f6\u4e5f\u662f\u8de8\u57df\u7684\u4e00\u79cd\u89e3\u51b3\u65b9\u6848\u3002WebSocket\u548cHTTP\u90fd\u662f\u5e94\u7528\u5c42\u534f\u8bae\uff0c\u90fd\u57fa\u4e8e TCP \u534f\u8bae\u3002\u4f46\u662f ",l.a.createElement("strong",null,"WebSocket \u662f\u4e00\u79cd\u53cc\u5411\u901a\u4fe1\u534f\u8bae\uff0c\u5728\u5efa\u7acb\u8fde\u63a5\u4e4b\u540e\uff0cWebSocket \u7684 server \u4e0e client \u90fd\u80fd\u4e3b\u52a8\u5411\u5bf9\u65b9\u53d1\u9001\u6216\u63a5\u6536\u6570\u636e"),"\u3002\u540c\u65f6\uff0cWebSocket \u5728\u5efa\u7acb\u8fde\u63a5\u65f6\u9700\u8981\u501f\u52a9 HTTP \u534f\u8bae\uff0c\u8fde\u63a5\u5efa\u7acb\u597d\u4e86\u4e4b\u540e client \u4e0e server \u4e4b\u95f4\u7684\u53cc\u5411\u901a\u4fe1\u5c31\u4e0e HTTP \u65e0\u5173\u4e86\u3002"),l.a.createElement("p",null,"\u539f\u751fWebSocket API\u4f7f\u7528\u8d77\u6765\u4e0d\u592a\u65b9\u4fbf\uff0c\u6211\u4eec\u4f7f\u7528",l.a.createElement("code",null,"Socket.io"),"\uff0c\u5b83\u5f88\u597d\u5730\u5c01\u88c5\u4e86webSocket\u63a5\u53e3\uff0c\u63d0\u4f9b\u4e86\u66f4\u7b80\u5355\u3001\u7075\u6d3b\u7684\u63a5\u53e3\uff0c\u4e5f\u5bf9\u4e0d\u652f\u6301webSocket\u7684\u6d4f\u89c8\u5668\u63d0\u4f9b\u4e86\u5411\u4e0b\u517c\u5bb9\u3002"),l.a.createElement("p",null,"\u6211\u4eec\u5148\u6765\u770b\u4e2a\u4f8b\u5b50\uff1a\u672c\u5730\u6587\u4ef6socket.html\u5411",l.a.createElement("code",null,"localhost:3000"),"\u53d1\u751f\u6570\u636e\u548c\u63a5\u53d7\u6570\u636e"),l.a.createElement(o["a"],{code:"// socket.html\n<script>\n    let socket = new WebSocket('ws://localhost:3000');\n    socket.onopen = function () {\n      socket.send('\u6211\u7231\u4f60');//\u5411\u670d\u52a1\u5668\u53d1\u9001\u6570\u636e\n    }\n    socket.onmessage = function (e) {\n      console.log(e.data);//\u63a5\u6536\u670d\u52a1\u5668\u8fd4\u56de\u7684\u6570\u636e\n    }\n<\/script>",lang:"html"}),l.a.createElement("p",null,"// server.js"),l.a.createElement(o["a"],{code:"let express = require('express');\nlet app = express();\nlet WebSocket = require('ws');//\u8bb0\u5f97\u5b89\u88c5ws\nlet wss = new WebSocket.Server({port:3000});\nwss.on('connection',function(ws) {\n  ws.on('message', function (data) {\n    console.log(data);\n    ws.send('\u6211\u4e0d\u7231\u4f60')\n  });\n})",lang:"js"}),l.a.createElement("h3",{id:"25-node\u4e2d\u95f4\u4ef6\u4ee3\u7406\u4e24\u6b21\u8de8\u57df"},l.a.createElement(r["AnchorLink"],{to:"#25-node\u4e2d\u95f4\u4ef6\u4ee3\u7406\u4e24\u6b21\u8de8\u57df","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"2.5 Node\u4e2d\u95f4\u4ef6\u4ee3\u7406(\u4e24\u6b21\u8de8\u57df)"),l.a.createElement("p",null,"\u5b9e\u73b0\u539f\u7406\uff1a",l.a.createElement("strong",null,"\u540c\u6e90\u7b56\u7565\u662f\u6d4f\u89c8\u5668\u9700\u8981\u9075\u5faa\u7684\u6807\u51c6\uff0c\u800c\u5982\u679c\u662f\u670d\u52a1\u5668\u5411\u670d\u52a1\u5668\u8bf7\u6c42\u5c31\u65e0\u9700\u9075\u5faa\u540c\u6e90\u7b56\u7565\u3002")," \u4ee3\u7406\u670d\u52a1\u5668\uff0c\u9700\u8981\u505a\u4ee5\u4e0b\u51e0\u4e2a\u6b65\u9aa4\uff1a"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("p",null,"\u63a5\u53d7\u5ba2\u6237\u7aef\u8bf7\u6c42 \u3002")),l.a.createElement("li",null,l.a.createElement("p",null,"\u5c06\u8bf7\u6c42 \u8f6c\u53d1\u7ed9\u670d\u52a1\u5668\u3002")),l.a.createElement("li",null,l.a.createElement("p",null,"\u62ff\u5230\u670d\u52a1\u5668 \u54cd\u5e94 \u6570\u636e\u3002")),l.a.createElement("li",null,l.a.createElement("p",null,"\u5c06 \u54cd\u5e94 \u8f6c\u53d1\u7ed9\u5ba2\u6237\u7aef\u3002"),l.a.createElement("p",null,l.a.createElement("img",{src:"https://wsk-mweb.oss-cn-hangzhou.aliyuncs.com/ipic/2020-10-08-102746.png",alt:"img"})))),l.a.createElement("p",null,"\u6211\u4eec\u5148\u6765\u770b\u4e2a\u4f8b\u5b50\uff1a\u672c\u5730\u6587\u4ef6index.html\u6587\u4ef6\uff0c\u901a\u8fc7\u4ee3\u7406\u670d\u52a1\u5668",l.a.createElement("code",null,"http://localhost:3000"),"\u5411\u76ee\u6807\u670d\u52a1\u5668",l.a.createElement("code",null,"http://localhost:4000"),"\u8bf7\u6c42\u6570\u636e\u3002"),l.a.createElement(o["a"],{code:"// index.html(http://127.0.0.1:5500)\n<script src=\"https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js\"><\/script>\n<script>\n  $.ajax({\n  \turl: 'http://localhost:3000',\n    type: 'post',\n    data: { name: 'xiamen', password: '123456' },\n    contentType: 'application/json;charset=utf-8',\n    success: function(result) {\n    \tconsole.log(result) // {\"title\":\"fontend\",\"password\":\"123456\"}\n    },\n    error: function(msg) {\n    \tconsole.log(msg)\n    }\n  })\n<\/script>",lang:"html"}),l.a.createElement("p",null,"// server1.js \u4ee3\u7406\u670d\u52a1\u5668(",l.a.createElement(r["Link"],{to:"http://localhost:3000/"},"http://localhost:3000"),")"),l.a.createElement(o["a"],{code:"const http = require('http')\n// \u7b2c\u4e00\u6b65\uff1a\u63a5\u53d7\u5ba2\u6237\u7aef\u8bf7\u6c42\nconst server = http.createServer((request, response) => {\n  // \u4ee3\u7406\u670d\u52a1\u5668\uff0c\u76f4\u63a5\u548c\u6d4f\u89c8\u5668\u76f4\u63a5\u4ea4\u4e92\uff0c\u9700\u8981\u8bbe\u7f6eCORS \u7684\u9996\u90e8\u5b57\u6bb5\n  response.writeHead(200, {\n    'Access-Control-Allow-Origin': '*',\n    'Access-Control-Allow-Methods': '*',\n    'Access-Control-Allow-Headers': 'Content-Type'\n  })\n  // \u7b2c\u4e8c\u6b65\uff1a\u5c06\u8bf7\u6c42\u8f6c\u53d1\u7ed9\u670d\u52a1\u5668\n  const proxyRequest = http\n    .request(\n      {\n        host: '127.0.0.1',\n        port: 4000,\n        url: '/',\n        method: request.method,\n        headers: request.headers\n      },\n      serverResponse => {\n        // \u7b2c\u4e09\u6b65\uff1a\u6536\u5230\u670d\u52a1\u5668\u7684\u54cd\u5e94\n        var body = ''\n        serverResponse.on('data', chunk => {\n          body += chunk\n        })\n        serverResponse.on('end', () => {\n          console.log('The data is ' + body)\n          // \u7b2c\u56db\u6b65\uff1a\u5c06\u54cd\u5e94\u7ed3\u679c\u8f6c\u53d1\u7ed9\u6d4f\u89c8\u5668\n          response.end(body)\n        })\n      }\n    )\n    .end()\n})\nserver.listen(3000, () => {\n  console.log('The proxyServer is running at http://localhost:3000')\n})",lang:"js"}),l.a.createElement("p",null,"// server2.js(",l.a.createElement(r["Link"],{to:"http://localhost:4000/"},"http://localhost:4000"),")"),l.a.createElement(o["a"],{code:"const http = require('http')\nconst data = { title: 'fontend', password: '123456' }\nconst server = http.createServer((request, response) => {\n  if (request.url === '/') {\n    response.end(JSON.stringify(data))\n  }\n})\nserver.listen(4000, () => {\n  console.log('The server is running at http://localhost:4000')\n})",lang:"js"}),l.a.createElement("p",null,"\u4e0a\u8ff0\u4ee3\u7801\u7ecf\u8fc7\u4e24\u6b21\u8de8\u57df\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u662f\u6d4f\u89c8\u5668\u5411\u4ee3\u7406\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\uff0c\u4e5f\u9075\u5faa\u540c\u6e90\u7b56\u7565\uff0c\u6700\u540e\u5728index.html\u6587\u4ef6\u6253\u5370\u51fa",l.a.createElement("code",null,"{",'"title":"fontend","password":"123456"',"}")),l.a.createElement("h3",{id:"26-nginx\u53cd\u5411\u4ee3\u7406"},l.a.createElement(r["AnchorLink"],{to:"#26-nginx\u53cd\u5411\u4ee3\u7406","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"2.6 nginx\u53cd\u5411\u4ee3\u7406"),l.a.createElement("p",null,"\u5b9e\u73b0\u539f\u7406\u7c7b\u4f3c\u4e8eNode\u4e2d\u95f4\u4ef6\u4ee3\u7406\uff0c\u9700\u8981\u4f60\u642d\u5efa\u4e00\u4e2a\u4e2d\u8f6cnginx\u670d\u52a1\u5668\uff0c\u7528\u4e8e\u8f6c\u53d1\u8bf7\u6c42\u3002"),l.a.createElement("p",null,"\u4f7f\u7528nginx\u53cd\u5411\u4ee3\u7406\u5b9e\u73b0\u8de8\u57df\uff0c\u662f\u6700\u7b80\u5355\u7684\u8de8\u57df\u65b9\u5f0f\u3002\u53ea\u9700\u8981\u4fee\u6539nginx\u7684\u914d\u7f6e\u5373\u53ef\u89e3\u51b3\u8de8\u57df\u95ee\u9898\uff0c\u652f\u6301\u6240\u6709\u6d4f\u89c8\u5668\uff0c\u652f\u6301session\uff0c\u4e0d\u9700\u8981\u4fee\u6539\u4efb\u4f55\u4ee3\u7801\uff0c\u5e76\u4e14\u4e0d\u4f1a\u5f71\u54cd\u670d\u52a1\u5668\u6027\u80fd\u3002"),l.a.createElement("p",null,"\u5b9e\u73b0\u601d\u8def\uff1a\u901a\u8fc7nginx\u914d\u7f6e\u4e00\u4e2a\u4ee3\u7406\u670d\u52a1\u5668\uff08\u57df\u540d\u4e0edomain1\u76f8\u540c\uff0c\u7aef\u53e3\u4e0d\u540c\uff09\u505a\u8df3\u677f\u673a\uff0c\u53cd\u5411\u4ee3\u7406\u8bbf\u95eedomain2\u63a5\u53e3\uff0c\u5e76\u4e14\u53ef\u4ee5\u987a\u4fbf\u4fee\u6539cookie\u4e2ddomain\u4fe1\u606f\uff0c\u65b9\u4fbf\u5f53\u524d\u57dfcookie\u5199\u5165\uff0c\u5b9e\u73b0\u8de8\u57df\u767b\u5f55\u3002"),l.a.createElement("p",null,"\u5148\u4e0b\u8f7d",l.a.createElement(r["Link"],{to:"http://nginx.org/en/download.html"},"nginx"),"\uff0c\u7136\u540e\u5c06nginx\u76ee\u5f55\u4e0b\u7684nginx.conf\u4fee\u6539\u5982\u4e0b:"),l.a.createElement(o["a"],{code:"// proxy\u670d\u52a1\u5668\nserver {\n    listen       81;\n    server_name  www.domain1.com;\n    location / {\n        proxy_pass   http://www.domain2.com:8080;  #\u53cd\u5411\u4ee3\u7406\n        proxy_cookie_domain www.domain2.com www.domain1.com; #\u4fee\u6539cookie\u91cc\u57df\u540d\n        index  index.html index.htm;\n\n        # \u5f53\u7528webpack-dev-server\u7b49\u4e2d\u95f4\u4ef6\u4ee3\u7406\u63a5\u53e3\u8bbf\u95eenignx\u65f6\uff0c\u6b64\u65f6\u65e0\u6d4f\u89c8\u5668\u53c2\u4e0e\uff0c\u6545\u6ca1\u6709\u540c\u6e90\u9650\u5236\uff0c\u4e0b\u9762\u7684\u8de8\u57df\u914d\u7f6e\u53ef\u4e0d\u542f\u7528\n        add_header Access-Control-Allow-Origin http://www.domain1.com;  #\u5f53\u524d\u7aef\u53ea\u8de8\u57df\u4e0d\u5e26cookie\u65f6\uff0c\u53ef\u4e3a*\n        add_header Access-Control-Allow-Credentials true;\n    }\n}\n\u590d\u5236\u4ee3\u7801",lang:"shell"}),l.a.createElement("p",null,"\u6700\u540e\u901a\u8fc7\u547d\u4ee4\u884c",l.a.createElement("code",null,"nginx -s reload"),"\u542f\u52a8nginx"),l.a.createElement(o["a"],{code:"// index.html\nvar xhr = new XMLHttpRequest();\n// \u524d\u7aef\u5f00\u5173\uff1a\u6d4f\u89c8\u5668\u662f\u5426\u8bfb\u5199cookie\nxhr.withCredentials = true;\n// \u8bbf\u95eenginx\u4e2d\u7684\u4ee3\u7406\u670d\u52a1\u5668\nxhr.open('get', 'http://www.domain1.com:81/?user=admin', true);\nxhr.send();",lang:"js"}),l.a.createElement("p",null,"// server.js"),l.a.createElement(o["a"],{code:"var http = require('http');\nvar server = http.createServer();\nvar qs = require('querystring');\nserver.on('request', function(req, res) {\n    var params = qs.parse(req.url.substring(2));\n    // \u5411\u524d\u53f0\u5199cookie\n    res.writeHead(200, {\n        'Set-Cookie': 'l=a123456;Path=/;Domain=www.domain2.com;HttpOnly'   // HttpOnly:\u811a\u672c\u65e0\u6cd5\u8bfb\u53d6\n    });\n    res.write(JSON.stringify(params));\n    res.end();\n});\nserver.listen('8080');\nconsole.log('Server is running at port 8080...');",lang:"js"}),l.a.createElement("h3",{id:"27-windowname--iframe"},l.a.createElement(r["AnchorLink"],{to:"#27-windowname--iframe","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"2.7 window.name + iframe"),l.a.createElement("p",null,"window.name\u5c5e\u6027\u7684\u72ec\u7279\u4e4b\u5904\uff1aname\u503c\u5728\u4e0d\u540c\u7684\u9875\u9762\uff08\u751a\u81f3\u4e0d\u540c\u57df\u540d\uff09\u52a0\u8f7d\u540e\u4f9d\u65e7\u5b58\u5728\uff0c\u5e76\u4e14\u53ef\u4ee5\u652f\u6301\u975e\u5e38\u957f\u7684 name \u503c\uff082MB\uff09\u3002"),l.a.createElement("p",null,"\u5176\u4e2da.html\u548cb.html\u662f\u540c\u57df\u7684\uff0c\u90fd\u662f",l.a.createElement("code",null,"http://localhost:3000"),";\u800cc.html\u662f",l.a.createElement("code",null,"http://localhost:4000")),l.a.createElement(o["a"],{code:'// a.html(http://localhost:3000/b.html)\n<iframe src="http://localhost:4000/c.html" frameborder="0" onload="load()" id="iframe"></iframe>\n<script>\n  let first = true\n  // onload\u4e8b\u4ef6\u4f1a\u89e6\u53d12\u6b21\uff0c\u7b2c1\u6b21\u52a0\u8f7d\u8de8\u57df\u9875\uff0c\u5e76\u7559\u5b58\u6570\u636e\u4e8ewindow.name\n  function load() {\n    if(first){\n      // \u7b2c1\u6b21onload(\u8de8\u57df\u9875)\u6210\u529f\u540e\uff0c\u5207\u6362\u5230\u540c\u57df\u4ee3\u7406\u9875\u9762\n      let iframe = document.getElementById(\'iframe\');\n      iframe.src = \'http://localhost:3000/b.html\';\n      first = false;\n    }else{\n      // \u7b2c2\u6b21onload(\u540c\u57dfb.html\u9875)\u6210\u529f\u540e\uff0c\u8bfb\u53d6\u540c\u57dfwindow.name\u4e2d\u6570\u636e\n      console.log(iframe.contentWindow.name);\n    }\n  }\n<\/script>',lang:"html"}),l.a.createElement("p",null,"b.html\u4e3a\u4e2d\u95f4\u4ee3\u7406\u9875\uff0c\u4e0ea.html\u540c\u57df\uff0c\u5185\u5bb9\u4e3a\u7a7a\u3002"),l.a.createElement(o["a"],{code:"// c.html(http://localhost:4000/c.html)\n <script>\n window.name = '\u6211\u4e0d\u7231\u4f60'  \n <\/script>",lang:"html"}),l.a.createElement("p",null,"\u603b\u7ed3\uff1a\u901a\u8fc7iframe\u7684src\u5c5e\u6027\u7531\u5916\u57df\u8f6c\u5411\u672c\u5730\u57df\uff0c\u8de8\u57df\u6570\u636e\u5373\u7531iframe\u7684window.name\u4ece\u5916\u57df\u4f20\u9012\u5230\u672c\u5730\u57df\u3002\u8fd9\u4e2a\u5c31\u5de7\u5999\u5730\u7ed5\u8fc7\u4e86\u6d4f\u89c8\u5668\u7684\u8de8\u57df\u8bbf\u95ee\u9650\u5236\uff0c\u4f46\u540c\u65f6\u5b83\u53c8\u662f\u5b89\u5168\u64cd\u4f5c\u3002"),l.a.createElement("h3",{id:"28-locationhash---iframe"},l.a.createElement(r["AnchorLink"],{to:"#28-locationhash---iframe","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"2.8 location.hash +  iframe"),l.a.createElement("p",null,"\u5b9e\u73b0\u539f\u7406\uff1a a.html\u6b32\u4e0ec.html\u8de8\u57df\u76f8\u4e92\u901a\u4fe1\uff0c\u901a\u8fc7\u4e2d\u95f4\u9875b.html\u6765\u5b9e\u73b0\u3002 \u4e09\u4e2a\u9875\u9762\uff0c\u4e0d\u540c\u57df\u4e4b\u95f4\u5229\u7528iframe\u7684location.hash\u4f20\u503c\uff0c\u76f8\u540c\u57df\u4e4b\u95f4\u76f4\u63a5js\u8bbf\u95ee\u6765\u901a\u4fe1\u3002"),l.a.createElement("p",null,"\u5177\u4f53\u5b9e\u73b0\u6b65\u9aa4\uff1a\u4e00\u5f00\u59cba.html\u7ed9c.html\u4f20\u4e00\u4e2ahash\u503c\uff0c\u7136\u540ec.html\u6536\u5230hash\u503c\u540e\uff0c\u518d\u628ahash\u503c\u4f20\u9012\u7ed9b.html\uff0c\u6700\u540eb.html\u5c06\u7ed3\u679c\u653e\u5230a.html\u7684hash\u503c\u4e2d\u3002 \u540c\u6837\u7684\uff0ca.html\u548cb.html\u662f\u540c\u57df\u7684\uff0c\u90fd\u662f",l.a.createElement("code",null,"http://localhost:3000"),";\u800cc.html\u662f",l.a.createElement("code",null,"http://localhost:4000")),l.a.createElement(o["a"],{code:'// a.html\n  <iframe src="http://localhost:4000/c.html#iloveyou"></iframe>\n  <script>\n    window.onhashchange = function () { //\u68c0\u6d4bhash\u7684\u53d8\u5316\n      console.log(location.hash);\n    }\n  <\/script>',lang:"html"}),l.a.createElement("p",null,"// b.html"),l.a.createElement(o["a"],{code:"<script>\n    window.parent.parent.location.hash = location.hash \n    //b.html\u5c06\u7ed3\u679c\u653e\u5230a.html\u7684hash\u503c\u4e2d\uff0cb.html\u53ef\u901a\u8fc7parent.parent\u8bbf\u95eea.html\u9875\u9762\n  <\/script>",lang:"html"}),l.a.createElement("p",null,"// c.html"),l.a.createElement(o["a"],{code:"console.log(location.hash);\n  let iframe = document.createElement('iframe');\n  iframe.src = 'http://localhost:3000/b.html#idontloveyou';\n  document.body.appendChild(iframe);",lang:"js"}),l.a.createElement("h3",{id:"29-documentdomain--iframe"},l.a.createElement(r["AnchorLink"],{to:"#29-documentdomain--iframe","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"2.9 document.domain + iframe"),l.a.createElement("p",null,l.a.createElement("strong",null,"\u8be5\u65b9\u5f0f\u53ea\u80fd\u7528\u4e8e\u4e8c\u7ea7\u57df\u540d\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0c\u6bd4\u5982 ",l.a.createElement("code",null,"a.test.com")," \u548c ",l.a.createElement("code",null,"b.test.com")," \u9002\u7528\u4e8e\u8be5\u65b9\u5f0f"),"\u3002 \u53ea\u9700\u8981\u7ed9\u9875\u9762\u6dfb\u52a0 ",l.a.createElement("code",null,"document.domain ='test.com'")," \u8868\u793a\u4e8c\u7ea7\u57df\u540d\u90fd\u76f8\u540c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u8de8\u57df\u3002"),l.a.createElement("p",null,"\u5b9e\u73b0\u539f\u7406\uff1a\u4e24\u4e2a\u9875\u9762\u90fd\u901a\u8fc7js\u5f3a\u5236\u8bbe\u7f6edocument.domain\u4e3a\u57fa\u7840\u4e3b\u57df\uff0c\u5c31\u5b9e\u73b0\u4e86\u540c\u57df\u3002"),l.a.createElement("p",null,"\u6211\u4eec\u770b\u4e2a\u4f8b\u5b50\uff1a\u9875\u9762",l.a.createElement("code",null,"a.zf1.cn:3000/a.html"),"\u83b7\u53d6\u9875\u9762",l.a.createElement("code",null,"b.zf1.cn:3000/b.html"),"\u4e2da\u7684\u503c"),l.a.createElement(o["a"],{code:'// a.html\n<body>\n helloa\n  <iframe src="http://b.zf1.cn:3000/b.html" frameborder="0" onload="load()" id="frame"></iframe>\n  <script>\n    document.domain = \'zf1.cn\'\n    function load() {\n      console.log(frame.contentWindow.a);\n    }\n  <\/script>\n</body>',lang:"html"}),l.a.createElement("p",null,"// b.html"),l.a.createElement(o["a"],{code:"<body>\n   hellob\n   <script>\n     document.domain = 'zf1.cn'\n     var a = 100;\n   <\/script>\n</body>",lang:"html"}),l.a.createElement("h2",{id:"3-\u603b\u7ed3"},l.a.createElement(r["AnchorLink"],{to:"#3-\u603b\u7ed3","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"3. \u603b\u7ed3"),l.a.createElement("ul",null,l.a.createElement("li",null,"CORS\u652f\u6301\u6240\u6709\u7c7b\u578b\u7684HTTP\u8bf7\u6c42\uff0c\u662f\u8de8\u57dfHTTP\u8bf7\u6c42\u7684\u6839\u672c\u89e3\u51b3\u65b9\u6848"),l.a.createElement("li",null,"JSONP\u53ea\u652f\u6301GET\u8bf7\u6c42\uff0cJSONP\u7684\u4f18\u52bf\u5728\u4e8e\u652f\u6301\u8001\u5f0f\u6d4f\u89c8\u5668\uff0c\u4ee5\u53ca\u53ef\u4ee5\u5411\u4e0d\u652f\u6301CORS\u7684\u7f51\u7ad9\u8bf7\u6c42\u6570\u636e\u3002"),l.a.createElement("li",null,"\u4e0d\u7ba1\u662fNode\u4e2d\u95f4\u4ef6\u4ee3\u7406\u8fd8\u662fnginx\u53cd\u5411\u4ee3\u7406\uff0c\u4e3b\u8981\u662f\u901a\u8fc7\u540c\u6e90\u7b56\u7565\u5bf9\u670d\u52a1\u5668\u4e0d\u52a0\u9650\u5236\u3002"),l.a.createElement("li",null,"\u65e5\u5e38\u5de5\u4f5c\u4e2d\uff0c\u7528\u5f97\u6bd4\u8f83\u591a\u7684\u8de8\u57df\u65b9\u6848\u662fcors\u548cnginx\u53cd\u5411\u4ee3\u7406"))))}));n["default"]=e=>{var n=l.a.useContext(r["context"]),t=n.demos;return l.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&r["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),l.a.createElement(c,{demos:t})}}}]);