(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[63],{QqkY:function(e,n,t){"use strict";t.r(n);var a=t("q1tI"),c=t.n(a),l=t("dEAq"),i=t("H1Ra"),o=c.a.memo((e=>{e.demos;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"markdown"},c.a.createElement("h1",{id:"\u9632\u6296\u51fd\u6570\u7684\u5b9e\u73b0"},c.a.createElement(l["AnchorLink"],{to:"#\u9632\u6296\u51fd\u6570\u7684\u5b9e\u73b0","aria-hidden":"true",tabIndex:-1},c.a.createElement("span",{className:"icon icon-link"})),"\u9632\u6296\u51fd\u6570\u7684\u5b9e\u73b0"),c.a.createElement("h2",{id:"\u524d\u8a00"},c.a.createElement(l["AnchorLink"],{to:"#\u524d\u8a00","aria-hidden":"true",tabIndex:-1},c.a.createElement("span",{className:"icon icon-link"})),"\u524d\u8a00"),c.a.createElement("p",null,"\u5728\u524d\u7aef\u5f00\u53d1\u4e2d\u4f1a\u9047\u5230\u4e00\u4e9b\u9891\u7e41\u7684\u4e8b\u4ef6\u89e6\u53d1\uff0c\u6bd4\u5982\uff1a"),c.a.createElement("ol",null,c.a.createElement("li",null,"window \u7684 resize\u3001scroll"),c.a.createElement("li",null,"mousedown\u3001mousemove"),c.a.createElement("li",null,"keyup\u3001keydown \u2026\u2026")),c.a.createElement("p",null,"\u4e3a\u6b64\uff0c\u6211\u4eec\u4e3e\u4e2a\u793a\u4f8b\u4ee3\u7801\u6765\u4e86\u89e3\u4e8b\u4ef6\u5982\u4f55\u9891\u7e41\u7684\u89e6\u53d1\uff1a"),c.a.createElement("p",null,"\u6211\u4eec\u5199\u4e2a ",c.a.createElement("code",null,"index.html")," \u6587\u4ef6\uff1a"),c.a.createElement(i["a"],{code:'<!DOCTYPE html>\n<html lang="zh-cmn-Hans">\n\n<head>\n    <meta charset="utf-8">\n    <meta http-equiv="x-ua-compatible" content="IE=edge, chrome=1">\n    <title>debounce</title>\n    <style>\n        #container{\n            width: 100%; height: 200px; line-height: 200px; text-align: center; color: #fff; background-color: #444; font-size: 30px;\n        }\n    </style>\n</head>\n\n<body>\n    <div id="container"></div>\n    <script src="debounce.js"><\/script>\n</body>\n\n</html>',lang:"html"}),c.a.createElement("p",null,c.a.createElement("code",null,"debounce.js")," \u6587\u4ef6\u7684\u4ee3\u7801\u5982\u4e0b\uff1a"),c.a.createElement(i["a"],{code:"var count = 1;\nvar container = document.getElementById('container');\n\nfunction getUserAction() {\n    container.innerHTML = count++;\n};\n\ncontainer.onmousemove = getUserAction;",lang:"javascript"}),c.a.createElement("p",null,"\u6211\u4eec\u6765\u770b\u770b\u6548\u679c\uff1a"),c.a.createElement("p",null,c.a.createElement(l["Link"],{to:"https://github.com/mqyqingfeng/Blog/raw/master/Images/debounce/debounce.gif"},c.a.createElement("img",{src:"https://github.com/mqyqingfeng/Blog/raw/master/Images/debounce/debounce.gif",alt:"debounce"}))),c.a.createElement("p",null,"\u4ece\u5de6\u8fb9\u6ed1\u5230\u53f3\u8fb9\u5c31\u89e6\u53d1\u4e86 165 \u6b21 getUserAction \u51fd\u6570\uff01"),c.a.createElement("p",null,"\u56e0\u4e3a\u8fd9\u4e2a\u4f8b\u5b50\u5f88\u7b80\u5355\uff0c\u6240\u4ee5\u6d4f\u89c8\u5668\u5b8c\u5168\u53cd\u5e94\u7684\u8fc7\u6765\uff0c\u53ef\u662f\u5982\u679c\u662f\u590d\u6742\u7684\u56de\u8c03\u51fd\u6570\u6216\u662f ajax \u8bf7\u6c42\u5462\uff1f\u5047\u8bbe 1 \u79d2\u89e6\u53d1\u4e86 60 \u6b21\uff0c\u6bcf\u4e2a\u56de\u8c03\u5c31\u5fc5\u987b\u5728 1000 / 60 = 16.67ms \u5185\u5b8c\u6210\uff0c\u5426\u5219\u5c31\u4f1a\u6709\u5361\u987f\u51fa\u73b0\u3002"),c.a.createElement("p",null,"\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4e00\u822c\u6709\u4e24\u79cd\u89e3\u51b3\u65b9\u6848\uff1a"),c.a.createElement("ol",null,c.a.createElement("li",null,"debounce \u9632\u6296"),c.a.createElement("li",null,"throttle \u8282\u6d41")),c.a.createElement("h2",{id:"\u9632\u6296"},c.a.createElement(l["AnchorLink"],{to:"#\u9632\u6296","aria-hidden":"true",tabIndex:-1},c.a.createElement("span",{className:"icon icon-link"})),"\u9632\u6296"),c.a.createElement("p",null,"\u4eca\u5929\u91cd\u70b9\u8bb2\u8bb2\u9632\u6296\u7684\u5b9e\u73b0\u3002"),c.a.createElement("p",null,"\u9632\u6296\u7684\u539f\u7406\u5c31\u662f\uff1a\u4f60\u5c3d\u7ba1\u89e6\u53d1\u4e8b\u4ef6\uff0c\u4f46\u662f\u6211\u4e00\u5b9a\u5728\u4e8b\u4ef6\u89e6\u53d1 n \u79d2\u540e\u624d\u6267\u884c\uff0c\u5982\u679c\u4f60\u5728\u4e00\u4e2a\u4e8b\u4ef6\u89e6\u53d1\u7684 n \u79d2\u5185\u53c8\u89e6\u53d1\u4e86\u8fd9\u4e2a\u4e8b\u4ef6\uff0c\u90a3\u6211\u5c31\u4ee5\u65b0\u7684\u4e8b\u4ef6\u7684\u65f6\u95f4\u4e3a\u51c6\uff0cn \u79d2\u540e\u624d\u6267\u884c\uff0c\u603b\u4e4b\uff0c\u5c31\u662f\u8981\u7b49\u4f60\u89e6\u53d1\u5b8c\u4e8b\u4ef6 n \u79d2\u5185\u4e0d\u518d\u89e6\u53d1\u4e8b\u4ef6\uff0c\u6211\u624d\u6267\u884c\uff0c\u771f\u662f\u4efb\u6027\u5450!"),c.a.createElement("h2",{id:"\u7b2c\u4e00\u7248"},c.a.createElement(l["AnchorLink"],{to:"#\u7b2c\u4e00\u7248","aria-hidden":"true",tabIndex:-1},c.a.createElement("span",{className:"icon icon-link"})),"\u7b2c\u4e00\u7248"),c.a.createElement("p",null,"\u6839\u636e\u8fd9\u6bb5\u8868\u8ff0\uff0c\u6211\u4eec\u53ef\u4ee5\u5199\u7b2c\u4e00\u7248\u7684\u4ee3\u7801\uff1a"),c.a.createElement(i["a"],{code:"// \u7b2c\u4e00\u7248\nfunction debounce(func, wait) {\n    var timeout;\n    return function () {\n        clearTimeout(timeout)\n        timeout = setTimeout(func, wait);\n    }\n}",lang:"javascript"}),c.a.createElement("p",null,"\u5982\u679c\u6211\u4eec\u8981\u4f7f\u7528\u5b83\uff0c\u4ee5\u6700\u4e00\u5f00\u59cb\u7684\u4f8b\u5b50\u4e3a\u4f8b\uff1a"),c.a.createElement(i["a"],{code:"container.onmousemove = debounce(getUserAction, 1000);",lang:"text"}),c.a.createElement("p",null,"\u73b0\u5728\u968f\u4f60\u600e\u4e48\u79fb\u52a8\uff0c\u53cd\u6b63\u4f60\u79fb\u52a8\u5b8c 1000ms \u5185\u4e0d\u518d\u89e6\u53d1\uff0c\u6211\u624d\u6267\u884c\u4e8b\u4ef6\u3002\u770b\u770b\u4f7f\u7528\u6548\u679c\uff1a"),c.a.createElement("p",null,c.a.createElement(l["Link"],{to:"https://github.com/mqyqingfeng/Blog/raw/master/Images/debounce/debounce-1.gif"},c.a.createElement("img",{src:"https://github.com/mqyqingfeng/Blog/raw/master/Images/debounce/debounce-1.gif",alt:"debounce \u7b2c\u4e00\u7248"}))),c.a.createElement("p",null,"\u987f\u65f6\u5c31\u4ece 165 \u6b21\u964d\u4f4e\u6210\u4e86 1 \u6b21!"),c.a.createElement("p",null,"\u68d2\u68d2\u54d2\uff0c\u6211\u4eec\u63a5\u7740\u5b8c\u5584\u5b83\u3002"),c.a.createElement("h2",{id:"this"},c.a.createElement(l["AnchorLink"],{to:"#this","aria-hidden":"true",tabIndex:-1},c.a.createElement("span",{className:"icon icon-link"})),"this"),c.a.createElement("p",null,"\u5982\u679c\u6211\u4eec\u5728 ",c.a.createElement("code",null,"getUserAction")," \u51fd\u6570\u4e2d ",c.a.createElement("code",null,"console.log(this)"),"\uff0c\u5728\u4e0d\u4f7f\u7528 ",c.a.createElement("code",null,"debounce")," \u51fd\u6570\u7684\u65f6\u5019\uff0c",c.a.createElement("code",null,"this")," \u7684\u503c\u4e3a\uff1a"),c.a.createElement(i["a"],{code:'<div id="container"></div>',lang:"text"}),c.a.createElement("p",null,"\u4f46\u662f\u5982\u679c\u4f7f\u7528\u6211\u4eec\u7684 debounce \u51fd\u6570\uff0cthis \u5c31\u4f1a\u6307\u5411 Window \u5bf9\u8c61\uff01"),c.a.createElement("p",null,"\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5c06 this \u6307\u5411\u6b63\u786e\u7684\u5bf9\u8c61\u3002"),c.a.createElement("p",null,"\u6211\u4eec\u4fee\u6539\u4e0b\u4ee3\u7801\uff1a"),c.a.createElement(i["a"],{code:"// \u7b2c\u4e8c\u7248\nfunction debounce(func, wait) {\n    var timeout;\n\n    return function () {\n        var context = this;\n\n        clearTimeout(timeout)\n        timeout = setTimeout(function(){\n            func.apply(context)\n        }, wait);\n    }\n}",lang:"javascript"}),c.a.createElement("p",null,"\u73b0\u5728 this \u5df2\u7ecf\u53ef\u4ee5\u6b63\u786e\u6307\u5411\u4e86\u3002\u8ba9\u6211\u4eec\u770b\u4e0b\u4e2a\u95ee\u9898\uff1a"),c.a.createElement("h2",{id:"event-\u5bf9\u8c61"},c.a.createElement(l["AnchorLink"],{to:"#event-\u5bf9\u8c61","aria-hidden":"true",tabIndex:-1},c.a.createElement("span",{className:"icon icon-link"})),"event \u5bf9\u8c61"),c.a.createElement("p",null,"JavaScript \u5728\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u4e2d\u4f1a\u63d0\u4f9b\u4e8b\u4ef6\u5bf9\u8c61 event\uff0c\u6211\u4eec\u4fee\u6539\u4e0b getUserAction \u51fd\u6570\uff1a"),c.a.createElement(i["a"],{code:"function getUserAction(e) {\n    console.log(e);\n    container.innerHTML = count++;\n};",lang:"javascript"}),c.a.createElement("p",null,"\u5982\u679c\u6211\u4eec\u4e0d\u4f7f\u7528 debouce \u51fd\u6570\uff0c\u8fd9\u91cc\u4f1a\u6253\u5370 MouseEvent \u5bf9\u8c61\uff0c\u5982\u56fe\u6240\u793a\uff1a"),c.a.createElement("p",null,c.a.createElement(l["Link"],{to:"https://github.com/mqyqingfeng/Blog/raw/master/Images/debounce/event.png"},c.a.createElement("img",{src:"https://github.com/mqyqingfeng/Blog/raw/master/Images/debounce/event.png",alt:"MouseEvent"}))),c.a.createElement("p",null,"\u4f46\u662f\u5728\u6211\u4eec\u5b9e\u73b0\u7684 debounce \u51fd\u6570\u4e2d\uff0c\u5374\u53ea\u4f1a\u6253\u5370 undefined!"),c.a.createElement("p",null,"\u6240\u4ee5\u6211\u4eec\u518d\u4fee\u6539\u4e00\u4e0b\u4ee3\u7801\uff1a"),c.a.createElement(i["a"],{code:"// \u7b2c\u4e09\u7248\nfunction debounce(func, wait) {\n    var timeout;\n\n    return function () {\n        var context = this;\n        var args = arguments;\n\n        clearTimeout(timeout)\n        timeout = setTimeout(function(){\n            func.apply(context, args)\n        }, wait);\n    }\n}",lang:"javascript"}),c.a.createElement("p",null,"\u5230\u6b64\u4e3a\u6b62\uff0c\u6211\u4eec\u4fee\u590d\u4e86\u4e24\u4e2a\u5c0f\u95ee\u9898\uff1a"),c.a.createElement("ol",null,c.a.createElement("li",null,"this \u6307\u5411"),c.a.createElement("li",null,"event \u5bf9\u8c61")),c.a.createElement("h2",{id:"\u7acb\u523b\u6267\u884c"},c.a.createElement(l["AnchorLink"],{to:"#\u7acb\u523b\u6267\u884c","aria-hidden":"true",tabIndex:-1},c.a.createElement("span",{className:"icon icon-link"})),"\u7acb\u523b\u6267\u884c"),c.a.createElement("p",null,"\u8fd9\u4e2a\u65f6\u5019\uff0c\u4ee3\u7801\u5df2\u7ecf\u5f88\u662f\u5b8c\u5584\u4e86\uff0c\u4f46\u662f\u4e3a\u4e86\u8ba9\u8fd9\u4e2a\u51fd\u6570\u66f4\u52a0\u5b8c\u5584\uff0c\u6211\u4eec\u63a5\u4e0b\u6765\u601d\u8003\u4e00\u4e2a\u65b0\u7684\u9700\u6c42\u3002"),c.a.createElement("p",null,"\u8fd9\u4e2a\u9700\u6c42\u5c31\u662f\uff1a"),c.a.createElement("p",null,"\u6211\u4e0d\u5e0c\u671b\u975e\u8981\u7b49\u5230\u4e8b\u4ef6\u505c\u6b62\u89e6\u53d1\u540e\u624d\u6267\u884c\uff0c\u6211\u5e0c\u671b\u7acb\u523b\u6267\u884c\u51fd\u6570\uff0c\u7136\u540e\u7b49\u5230\u505c\u6b62\u89e6\u53d1 n \u79d2\u540e\uff0c\u624d\u53ef\u4ee5\u91cd\u65b0\u89e6\u53d1\u6267\u884c\u3002"),c.a.createElement("p",null,"\u60f3\u60f3\u8fd9\u4e2a\u9700\u6c42\u4e5f\u662f\u5f88\u6709\u9053\u7406\u7684\u561b\uff0c\u90a3\u6211\u4eec\u52a0\u4e2a immediate \u53c2\u6570\u5224\u65ad\u662f\u5426\u662f\u7acb\u523b\u6267\u884c\u3002"),c.a.createElement(i["a"],{code:"// \u7b2c\u56db\u7248\nfunction debounce(func, wait, immediate) {\n\n    var timeout;\n\n    return function () {\n        var context = this;\n        var args = arguments;\n\n        if (timeout) clearTimeout(timeout);\n        if (immediate) {\n            // \u5982\u679c\u5df2\u7ecf\u6267\u884c\u8fc7\uff0c\u4e0d\u518d\u6267\u884c\n            var callNow = !timeout;\n            timeout = setTimeout(function(){\n                timeout = null;\n            }, wait)\n            if (callNow) func.apply(context, args)\n        }\n        else {\n            timeout = setTimeout(function(){\n                func.apply(context, args)\n            }, wait);\n        }\n    }\n}",lang:"javascript"}),c.a.createElement("p",null,"\u518d\u6765\u770b\u770b\u4f7f\u7528\u6548\u679c\uff1a"),c.a.createElement("p",null,c.a.createElement(l["Link"],{to:"https://github.com/mqyqingfeng/Blog/raw/master/Images/debounce/debounce-4.gif"},c.a.createElement("img",{src:"https://github.com/mqyqingfeng/Blog/raw/master/Images/debounce/debounce-4.gif",alt:"debounce \u7b2c\u56db\u7248"}))),c.a.createElement("h2",{id:"\u8fd4\u56de\u503c"},c.a.createElement(l["AnchorLink"],{to:"#\u8fd4\u56de\u503c","aria-hidden":"true",tabIndex:-1},c.a.createElement("span",{className:"icon icon-link"})),"\u8fd4\u56de\u503c"),c.a.createElement("p",null,"\u6b64\u65f6\u6ce8\u610f\u4e00\u70b9\uff0c\u5c31\u662f getUserAction \u51fd\u6570\u53ef\u80fd\u662f\u6709\u8fd4\u56de\u503c\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u4e5f\u8981\u8fd4\u56de\u51fd\u6570\u7684\u6267\u884c\u7ed3\u679c\uff0c\u4f46\u662f\u5f53 immediate \u4e3a false \u7684\u65f6\u5019\uff0c\u56e0\u4e3a\u4f7f\u7528\u4e86 setTimeout \uff0c\u6211\u4eec\u5c06 func.apply(context, args) \u7684\u8fd4\u56de\u503c\u8d4b\u7ed9\u53d8\u91cf\uff0c\u6700\u540e\u518d return \u7684\u65f6\u5019\uff0c\u503c\u5c06\u4f1a\u4e00\u76f4\u662f undefined\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u5728 immediate \u4e3a true \u7684\u65f6\u5019\u8fd4\u56de\u51fd\u6570\u7684\u6267\u884c\u7ed3\u679c\u3002"),c.a.createElement(i["a"],{code:"// \u7b2c\u4e94\u7248\nfunction debounce(func, wait, immediate) {\n\n    var timeout, result;\n\n    return function () {\n        var context = this;\n        var args = arguments;\n\n        if (timeout) clearTimeout(timeout);\n        if (immediate) {\n            // \u5982\u679c\u5df2\u7ecf\u6267\u884c\u8fc7\uff0c\u4e0d\u518d\u6267\u884c\n            var callNow = !timeout;\n            timeout = setTimeout(function(){\n                timeout = null;\n            }, wait)\n            if (callNow) result = func.apply(context, args)\n        }\n        else {\n            timeout = setTimeout(function(){\n                func.apply(context, args)\n            }, wait);\n        }\n        return result;\n    }\n}",lang:"javascript"}),c.a.createElement("h2",{id:"\u53d6\u6d88"},c.a.createElement(l["AnchorLink"],{to:"#\u53d6\u6d88","aria-hidden":"true",tabIndex:-1},c.a.createElement("span",{className:"icon icon-link"})),"\u53d6\u6d88"),c.a.createElement("p",null,"\u6700\u540e\u6211\u4eec\u518d\u601d\u8003\u4e00\u4e2a\u5c0f\u9700\u6c42\uff0c\u6211\u5e0c\u671b\u80fd\u53d6\u6d88 debounce \u51fd\u6570\uff0c\u6bd4\u5982\u8bf4\u6211 debounce \u7684\u65f6\u95f4\u95f4\u9694\u662f 10 \u79d2\u949f\uff0cimmediate \u4e3a true\uff0c\u8fd9\u6837\u7684\u8bdd\uff0c\u6211\u53ea\u6709\u7b49 10 \u79d2\u540e\u624d\u80fd\u91cd\u65b0\u89e6\u53d1\u4e8b\u4ef6\uff0c\u73b0\u5728\u6211\u5e0c\u671b\u6709\u4e00\u4e2a\u6309\u94ae\uff0c\u70b9\u51fb\u540e\uff0c\u53d6\u6d88\u9632\u6296\uff0c\u8fd9\u6837\u6211\u518d\u53bb\u89e6\u53d1\uff0c\u5c31\u53ef\u4ee5\u53c8\u7acb\u523b\u6267\u884c\u5566\uff0c\u662f\u4e0d\u662f\u5f88\u5f00\u5fc3\uff1f"),c.a.createElement("p",null,"\u4e3a\u4e86\u8fd9\u4e2a\u9700\u6c42\uff0c\u6211\u4eec\u5199\u6700\u540e\u4e00\u7248\u7684\u4ee3\u7801\uff1a"),c.a.createElement(i["a"],{code:"// \u7b2c\u516d\u7248\nfunction debounce(func, wait, immediate) {\n\n    var timeout, result;\n\n    var debounced = function () {\n        var context = this;\n        var args = arguments;\n\n        if (timeout) clearTimeout(timeout);\n        if (immediate) {\n            // \u5982\u679c\u5df2\u7ecf\u6267\u884c\u8fc7\uff0c\u4e0d\u518d\u6267\u884c\n            var callNow = !timeout;\n            timeout = setTimeout(function(){\n                timeout = null;\n            }, wait)\n            if (callNow) result = func.apply(context, args)\n        }\n        else {\n            timeout = setTimeout(function(){\n                func.apply(context, args)\n            }, wait);\n        }\n        return result;\n    };\n\n    debounced.cancel = function() {\n        clearTimeout(timeout);\n        timeout = null;\n    };\n\n    return debounced;\n}",lang:"javascript"}),c.a.createElement("p",null,"\u90a3\u4e48\u8be5\u5982\u4f55\u4f7f\u7528\u8fd9\u4e2a cancel \u51fd\u6570\u5462\uff1f\u4f9d\u7136\u662f\u4ee5\u4e0a\u9762\u7684 demo \u4e3a\u4f8b\uff1a"),c.a.createElement(i["a"],{code:"var count = 1;\nvar container = document.getElementById('container');\n\nfunction getUserAction(e) {\n    container.innerHTML = count++;\n};\n\nvar setUseAction = debounce(getUserAction, 10000, true);\n\ncontainer.onmousemove = setUseAction;\n\ndocument.getElementById(\"button\").addEventListener('click', function(){\n    setUseAction.cancel();\n})",lang:"javascript"}),c.a.createElement("h2",{id:"\u53c2\u8003"},c.a.createElement(l["AnchorLink"],{to:"#\u53c2\u8003","aria-hidden":"true",tabIndex:-1},c.a.createElement("span",{className:"icon icon-link"})),"\u53c2\u8003"),c.a.createElement("p",null,c.a.createElement(l["Link"],{to:"https://github.com/mqyqingfeng/Blog/issues/22"},"JavaScript\u4e13\u9898\u4e4b\u8ddf\u7740underscore\u5b66\u9632\u6296"))))}));n["default"]=e=>{var n=c.a.useContext(l["context"]),t=n.demos;return c.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&l["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),c.a.createElement(o,{demos:t})}}}]);